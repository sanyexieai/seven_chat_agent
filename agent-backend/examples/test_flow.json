{
  "nodes": [
    {
      "id": "start_node",
      "type": "start",
      "category": "start",
      "implementation": "start",
      "position": {
        "x": 250,
        "y": 50
      },
      "data": {
        "label": "开始",
        "config": {}
      }
    },
    {
      "id": "llm_1",
      "type": "llm",
      "category": "processor",
      "implementation": "llm",
      "position": {
        "x": 250,
        "y": 150
      },
      "data": {
        "label": "LLM处理",
        "config": {
          "system_prompt": "你是一个有用的AI助手",
          "user_prompt": "{{message}}",
          "save_as": "llm_output"
        }
      }
    },
    {
      "id": "router_1",
      "type": "router",
      "category": "router",
      "implementation": "router",
      "position": {
        "x": 250,
        "y": 300
      },
      "data": {
        "label": "路由判断",
        "config": {
          "routing_logic": {
            "field": "need_tool",
            "value": true
          }
        }
      }
    },
    {
      "id": "tool_1",
      "type": "tool",
      "category": "processor",
      "implementation": "tool",
      "position": {
        "x": 150,
        "y": 450
      },
      "data": {
        "label": "调用工具",
        "config": {
          "server": "web_search",
          "tool": "search",
          "params": {
            "query": "{{llm_output}}"
          }
        }
      }
    },
    {
      "id": "llm_2",
      "type": "llm",
      "category": "processor",
      "implementation": "llm",
      "position": {
        "x": 250,
        "y": 600
      },
      "data": {
        "label": "最终处理",
        "config": {
          "system_prompt": "根据工具结果生成最终回答",
          "user_prompt": "工具结果：{{tool_result}}\n用户问题：{{message}}",
          "save_as": "last_output"
        }
      }
    },
    {
      "id": "end_node",
      "type": "end",
      "category": "end",
      "implementation": "end",
      "position": {
        "x": 250,
        "y": 700
      },
      "data": {
        "label": "结束",
        "config": {}
      }
    }
  ],
  "edges": [
    {
      "id": "edge_1",
      "source": "start_node",
      "target": "llm_1",
      "type": "default"
    },
    {
      "id": "edge_2",
      "source": "llm_1",
      "target": "router_1",
      "type": "default"
    },
    {
      "id": "edge_3",
      "source": "router_1",
      "target": "tool_1",
      "type": "default",
      "sourceHandle": "source-true"
    },
    {
      "id": "edge_4",
      "source": "tool_1",
      "target": "llm_2",
      "type": "default"
    },
    {
      "id": "edge_5",
      "source": "router_1",
      "target": "llm_2",
      "type": "default",
      "sourceHandle": "source-false"
    },
    {
      "id": "edge_6",
      "source": "llm_2",
      "target": "end_node",
      "type": "default"
    }
  ],
  "metadata": {
    "name": "测试流程图",
    "description": "这是一个测试流程图，包含开始、LLM、路由、工具和结束节点",
    "version": "1.0.0"
  }
}

