# 前端知识库功能说明

## 概述

前端知识库功能为用户提供了直观的界面来管理知识库、上传文档和进行智能查询。通过现代化的UI设计，用户可以轻松地创建、管理和查询知识库。

## 功能特性

### 1. 知识库管理页面 (`/knowledge-base`)

#### 主要功能
- **知识库列表**: 显示所有可访问的知识库
- **创建知识库**: 通过模态框创建新的知识库
- **编辑知识库**: 修改知识库的名称、描述等属性
- **删除知识库**: 软删除知识库
- **文档管理**: 查看和管理知识库中的文档
- **文档上传**: 支持拖拽上传文档文件

#### 界面特点
- **响应式设计**: 适配不同屏幕尺寸
- **直观操作**: 点击选择、拖拽上传等交互
- **实时反馈**: 操作状态和结果即时显示
- **美观界面**: 现代化的卡片式布局

### 2. 知识库查询页面 (`/knowledge-query`)

#### 主要功能
- **知识库选择**: 从下拉列表选择要查询的知识库
- **智能查询**: 输入自然语言问题进行查询
- **结果展示**: 显示查询结果和来源文档
- **查询历史**: 保存最近的查询记录
- **相似度显示**: 显示文档匹配的相似度

#### 界面特点
- **分栏布局**: 左侧查询面板，右侧结果展示
- **实时加载**: 查询过程中显示加载状态
- **结果格式化**: 清晰展示查询结果和来源
- **历史记录**: 方便查看之前的查询

### 3. 聊天集成组件

#### 主要功能
- **知识库查询**: 在聊天界面中直接查询知识库
- **结果发送**: 将查询结果发送到聊天对话
- **上下文集成**: 查询结果作为聊天消息的一部分

## 技术实现

### 1. 组件结构

```
src/
├── pages/
│   ├── KnowledgeBasePage.tsx      # 知识库管理页面
│   ├── KnowledgeBasePage.css      # 知识库管理样式
│   ├── KnowledgeQueryPage.tsx     # 知识库查询页面
│   └── KnowledgeQueryPage.css     # 知识库查询样式
├── components/
│   └── KnowledgeBaseChat.tsx      # 知识库聊天组件
└── App.tsx                        # 路由配置
```

### 2. 路由配置

```typescript
// App.tsx
<Route path="/knowledge-base" element={<KnowledgeBasePage />} />
<Route path="/knowledge-query" element={<KnowledgeQueryPage />} />
```

### 3. 导航菜单

```typescript
// Sidebar.tsx
<Menu.Item key="/knowledge-base" icon={<BookOutlined />}>
  <Text style={{ color: 'white' }}>知识库管理</Text>
</Menu.Item>
<Menu.Item key="/knowledge-query" icon={<SearchOutlined />}>
  <Text style={{ color: 'white' }}>知识库查询</Text>
</Menu.Item>
```

## 使用指南

### 1. 知识库管理

#### 创建知识库
1. 点击"知识库管理"菜单
2. 点击"创建知识库"按钮
3. 填写知识库信息：
   - 知识库名称（唯一标识）
   - 显示名称（用户可见）
   - 描述（可选）
   - 是否公开
4. 点击"创建"完成

#### 上传文档
1. 选择要管理的知识库
2. 点击"上传文档"按钮
3. 拖拽文件或点击选择文件
4. 可选择添加元数据（JSON格式）
5. 点击"上传"完成

#### 管理文档
- 查看文档列表和状态
- 删除不需要的文档
- 查看文档详情和元数据

### 2. 知识库查询

#### 基本查询
1. 点击"知识库查询"菜单
2. 从下拉列表选择知识库
3. 在文本框中输入查询问题
4. 点击"开始查询"按钮
5. 查看查询结果和来源文档

#### 高级功能
- 查看查询历史记录
- 查看文档相似度
- 查看来源文档详情

### 3. 聊天集成

#### 在聊天中使用
1. 在聊天界面中展开知识库查询面板
2. 选择要查询的知识库
3. 输入查询问题
4. 点击"查询知识库"
5. 查询结果会自动发送到聊天对话中

## 界面设计

### 1. 设计原则

- **简洁明了**: 界面简洁，操作直观
- **响应式**: 适配不同设备屏幕
- **一致性**: 保持与整体UI风格一致
- **可访问性**: 支持键盘操作和屏幕阅读器

### 2. 色彩方案

- **主色调**: #1890ff (蓝色)
- **成功色**: #52c41a (绿色)
- **警告色**: #faad14 (橙色)
- **错误色**: #f5222d (红色)
- **背景色**: #fafafa (浅灰)

### 3. 交互反馈

- **加载状态**: 显示加载动画和提示
- **操作反馈**: 成功/失败消息提示
- **悬停效果**: 鼠标悬停时的视觉反馈
- **选中状态**: 清晰显示当前选中项

## 技术特点

### 1. React + TypeScript

- **类型安全**: 完整的TypeScript类型定义
- **组件化**: 可复用的React组件
- **状态管理**: 使用React Hooks管理状态

### 2. Ant Design

- **UI组件**: 使用Ant Design组件库
- **主题定制**: 统一的视觉风格
- **响应式**: 内置的响应式设计

### 3. 异步处理

- **API调用**: 使用fetch进行HTTP请求
- **错误处理**: 完善的错误处理机制
- **加载状态**: 友好的加载状态提示

## 扩展功能

### 1. 高级搜索

- 支持多字段搜索
- 支持布尔查询
- 支持范围查询
- 支持模糊匹配

### 2. 文档预览

- 支持文档内容预览
- 支持文档格式转换
- 支持文档版本管理

### 3. 批量操作

- 支持批量上传文档
- 支持批量删除文档
- 支持批量修改属性

### 4. 权限管理

- 支持用户权限控制
- 支持知识库访问权限
- 支持操作日志记录

## 性能优化

### 1. 代码分割

- 按路由分割代码
- 懒加载组件
- 减少初始包大小

### 2. 缓存策略

- 缓存知识库列表
- 缓存查询结果
- 缓存用户设置

### 3. 网络优化

- 请求去重
- 请求取消
- 错误重试

## 故障排除

### 1. 常见问题

#### 页面无法加载
- 检查网络连接
- 检查API服务是否运行
- 检查浏览器控制台错误

#### 上传失败
- 检查文件格式是否支持
- 检查文件大小是否超限
- 检查网络连接状态

#### 查询无结果
- 确认知识库中有文档
- 检查文档是否处理完成
- 尝试不同的查询关键词

### 2. 调试工具

- 浏览器开发者工具
- React Developer Tools
- 网络请求监控

### 3. 日志查看

```bash
# 查看前端日志
tail -f logs/frontend.log

# 查看API请求日志
tail -f logs/api.log
```

## 开发指南

### 1. 环境设置

```bash
# 安装依赖
npm install

# 启动开发服务器
npm start

# 构建生产版本
npm run build
```

### 2. 代码规范

- 使用ESLint进行代码检查
- 使用Prettier进行代码格式化
- 遵循TypeScript最佳实践

### 3. 测试

```bash
# 运行单元测试
npm test

# 运行E2E测试
npm run test:e2e
```

## 部署说明

### 1. 构建

```bash
npm run build
```

### 2. 部署

- 将构建文件部署到Web服务器
- 配置反向代理
- 设置环境变量

### 3. 监控

- 配置错误监控
- 配置性能监控
- 配置用户行为分析 